@*
 * SPDX-FileCopyrightText: Copyright Corsinvest Srl
 * SPDX-License-Identifier: AGPL-3.0-only
*@
@inherits AHComponentBase

<MudPaper Elevation="1">
    @if (PveClient == null)
    {
        <MudProgressLinear Color="Color.Primary" Indeterminate Class="my-7" />
    }
    else
    {
        <Corsinvest.ProxmoxVE.Admin.Core.UI.ProxmoxVE.Cluster.Resources Height="calc(100vh - 320px)"
                                                                    Permissions="Module.Permissions.DataGrid.Data"
                                                                    GetItems="GetNodes"
                                                                    PropertiesName="new[]
                                                                    {
                                                                        nameof(ClusterResource.Status),
                                                                        nameof(ClusterResource.Type),
                                                                        nameof(ClusterResource.Description),
                                                                        nameof(ClusterResource.DiskUsagePercentage),
                                                                        nameof(ClusterResource.MemoryUsagePercentage),
                                                                        nameof(ClusterResource.CpuUsagePercentage),
                                                                        nameof(ClusterResource.Uptime)
                                                                    }"
                                                                    DefaultSort="new()
                                                                    {
                                                                        [nameof(ClusterResource.Type)] = false,
                                                                        [nameof(ClusterResource.Description)] = false,
                                                                    }">
            <ChildRowContent>
                <DisksList PveClient="PveClient" Node="@context.Item.Node" />
            </ChildRowContent>
        </Corsinvest.ProxmoxVE.Admin.Core.UI.ProxmoxVE.Cluster.Resources>
    }
</MudPaper>
