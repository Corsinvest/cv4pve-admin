@*
 * SPDX-FileCopyrightText: Copyright Corsinvest Srl
 * SPDX-License-Identifier: AGPL-3.0-only
*@
@inherits AdminComponentBase

<RadzenTable Style="border:none;">
    @* @RenderRow(string.Empty, "Enabled", Storage. ? "Yes" : "Mo") *@
    @RenderRow(string.Empty, "Active", Storage.IsAvailable ? "Yes" : "Mo")
    @RenderRow(string.Empty, "Content", Storage.Content)
    @RenderRow(string.Empty, "Type", Storage.PluginType)

    <RadzenTableRow>
        <RadzenTableCell Style="border:none;" colspan="2">
            @RenderTitle(string.Empty, "Usage", FormatHelper.UsageInfo(Storage.DiskUsage, Storage.DiskSize))
            @RenderProgress(Storage.DiskUsagePercentage * 100)
        </RadzenTableCell>
    </RadzenTableRow>
</RadzenTable>

@code
{
    private RenderFragment RenderRow(string icon, string title, string value) => __builder =>
    {
        <RadzenTableRow>
            <RadzenTableCell Style="border:none;">
                <RadzenStack Orientation="Orientation.Horizontal" Gap="5px">
                    @if (!string.IsNullOrEmpty(icon))
                    {
                        <RadzenIcon Icon="@icon" />
                    }
                    <RadzenText TextStyle="TextStyle.Body2"><strong>@L[title]</strong></RadzenText>
                </RadzenStack>
            </RadzenTableCell>

            <RadzenTableCell Style="border:none; text-align: end;">
                <RadzenText TextStyle="TextStyle.Body2" Text="@value" />
            </RadzenTableCell>
        </RadzenTableRow>
    };

    private RenderFragment RenderTitle(string icon, string title, string value) => __builder =>
    {
        <RadzenStack Orientation="Orientation.Horizontal" Gap="5px">
            @if (!string.IsNullOrEmpty(icon))
            {
                <RadzenIcon Icon="@icon" />
            }
            <RadzenText TextStyle="TextStyle.Body2" class="rz-w-100"><strong>@L[title]</strong></RadzenText>
            <RadzenText TextStyle="TextStyle.Body2" Text="@value" />
        </RadzenStack>
    };

    private RenderFragment RenderProgress(double value) => __builder =>
    {
        <RadzenProgressBar Value="@value"
                           ShowValue="false"
                           class="rz-w-100"
                           ProgressBarStyle="@PveAdminUIHelper.ToProgressBarStyle(PveAdminUIHelper.GetColorRange(value))" />
    };
}
